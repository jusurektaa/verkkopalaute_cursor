<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anna palautetta - Verkkopalaute</title>
    <link rel="icon" href="assets/logo.png" type="image/png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="feedback-form.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="index.html">
                    <img src="assets/logo.png" alt="Verkkopalaute" class="logo-img">
                </a>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html#hero">Etusivu</a></li>
                <li><a href="index.html#features">Ominaisuudet</a></li>
                <li><a href="index.html#pricing">Hinnat</a></li>
                <li><a href="feedback-form.html">Anna palautetta</a></li>
                <li><a href="contact.html">Ota yhteyttä</a></li>
                <li><a href="login.html" class="btn-primary">Kirjaudu</a></li>
            </ul>
            <div class="menu-icon" id="menuIcon">&#9776;</div>
        </nav>
    </header>

    <main class="feedback-main">
        <div class="feedback-container">
            <div class="feedback-card">
                <div class="feedback-header">
                    <h1>Anna palautetta</h1>
                    <p>Kerro meille miten onnistuimme! Arvostelusi auttaa meitä kehittämään palveluamme.</p>
                </div>
                
                <form id="feedbackForm" class="feedback-form">
                    <div class="form-group">
                        <label for="name">Nimi *</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Sähköposti *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="company">Yritys</label>
                        <input type="text" id="company" name="company">
                    </div>
                    
                    <div class="form-group">
                        <label>Miten onnistuimme? *</label>
                        <div class="rating-group">
                            <div class="rating-buttons">
                                <button type="button" class="rating-btn" data-rating="1">1</button>
                                <button type="button" class="rating-btn" data-rating="2">2</button>
                                <button type="button" class="rating-btn" data-rating="3">3</button>
                                <button type="button" class="rating-btn" data-rating="4">4</button>
                                <button type="button" class="rating-btn" data-rating="5">5</button>
                                <button type="button" class="rating-btn" data-rating="6">6</button>
                                <button type="button" class="rating-btn" data-rating="7">7</button>
                                <button type="button" class="rating-btn" data-rating="8">8</button>
                                <button type="button" class="rating-btn" data-rating="9">9</button>
                                <button type="button" class="rating-btn" data-rating="10">10</button>
                            </div>
                            <div class="rating-labels">
                                <span>Huono</span>
                                <span>Erinomainen</span>
                            </div>
                        </div>
                        <input type="hidden" id="rating" name="rating" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Lisätietoja (valinnainen)</label>
                        <textarea id="message" name="message" rows="4" placeholder="Kerro lisää kokemuksestasi..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn-submit">Lähetä palaute</button>
                </form>
                
                <div id="feedbackMessage" class="feedback-message"></div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Verkkopalaute</h4>
                    <p>Suomalainen palvelu asiakaspalautteen keräämiseen ja käsittelyyn.</p>
                </div>
                <div class="footer-section">
                    <h4>Linkit</h4>
                    <ul>
                        <li><a href="index.html#hero">Etusivu</a></li>
                        <li><a href="index.html#features">Ominaisuudet</a></li>
                        <li><a href="index.html#pricing">Hinnat</a></li>
                        <li><a href="feedback-form.html">Anna palautetta</a></li>
                        <li><a href="contact.html">Ota yhteyttä</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Yhteystiedot</h4>
                    <p>info@verkkopalaute.fi</p>
                    <p>+358 40 123 4567</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Verkkopalaute. Kaikki oikeudet pidätetään.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
        import { getFirestore, collection, addDoc, query, where, orderBy, getDocs, doc, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAaiyXF6_mhWfjsFVWV6aTTj5PvadOicbM",
            authDomain: "verkkopalaute-551f8.firebaseapp.com",
            projectId: "verkkopalaute-551f8",
            storageBucket: "verkkopalaute-551f8.firebasestorage.app",
            messagingSenderId: "1079172282962",
            appId: "1:1079172282962:web:71a32e306ba936b306fd8b",
            measurementId: "G-HGQ7GP79NW"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        
        // Tee Firebase-palvelut globaaliksi
        window.FirebaseService = {
            async saveFeedback(feedback) {
                try {
                    // Lisää timestamp jos ei ole
                    if (!feedback.timestamp) {
                        feedback.timestamp = new Date().toISOString();
                    }
                    
                    // Tallenna palaute
                    const docRef = await addDoc(collection(db, 'feedback'), feedback);
                    console.log('Palaute tallennettu ID:llä:', docRef.id);
                    
                    return {
                        success: true,
                        id: docRef.id,
                        message: 'Palaute tallennettu onnistuneesti!'
                    };
                } catch (error) {
                    console.error('Virhe palautteen tallentamisessa:', error);
                    return {
                        success: false,
                        error: error.message
                    };
                }
            }
        };
    </script>
    
    <!-- Firebase-konfiguraatio -->
    <script src="firebase-config.js"></script>
    
    <!-- Palaute-lomakkeen toiminnallisuus -->
    <script src="feedback-form.js"></script>
</body>
</html>
